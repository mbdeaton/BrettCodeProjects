<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Station Table</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div id="root">
      <h1>Test Stations</h1>
      <table id="station-table">
        <thead>
          <tr>
            <th>Station Label</th>
            <th>PC Hostname</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <form id="new-row-form">
              <td>
                <input id="stationLabel" type="text" placeholder="label" />
              </td>
              <td>
                <input id="pcHostname" type="text" placeholder="hostname" />
              </td>
              <td>
                <button>+</button>
              </td>
            </form>
          </tr>
        </tfoot>
      </table>
    </div>

    <script>
      function createRow({ label, hostname }) {
        const tableBody = document
          .getElementById("station-table")
          .getElementsByTagName("tbody")[0];
        const row = tableBody.insertRow();
        const cellL = row.insertCell(0);
        const cellH = row.insertCell(1);
        cellL.innerHTML = label;
        cellH.innerHTML = hostname;
      }

      function station(label, hostname) {
        return { label, hostname };
      }

      function userCreateRow(event) {
        event.preventDefault();
        createRow(
          station(
            event.target.elements.stationLabel.value,
            event.target.elements.pcHostname.value
          )
        );
        const form = document.getElementById("new-row-form");
        form.reset();
      }

      const tableInit = [
        station("EA_STA_100", "MFGPC0"),
        station("EA_STA_101", "MFGPC1"),
        station("EA_STA_102", "MFGPC2"),
      ];

      tableInit.map((x) => createRow(x));
      document
        .getElementsByTagName("form")[0]
        .addEventListener("submit", userCreateRow);
    </script>
  </body>
</html>
